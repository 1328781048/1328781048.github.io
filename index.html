<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>当前时间显示</title>
    <!-- Tailwind CSS v3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 统一的 Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        dark: '#1E293B',
                        light: '#F8FAFC',
                        accent: '#8B5CF6',
                        sunset: '#F59E0B',
                        night: '#0F172A',
                        dawn: '#FBBF24',
                        day: '#3B82F6'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    },
                    animation: {
                        'fade-in': 'fadeIn 1s ease-in-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'pulse-slow': 'pulse 3s infinite'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }
            .text-shadow-lg {
                text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            }
            .bg-gradient-day {
                background: linear-gradient(135deg, #3B82F6 0%, #93C5FD 100%);
            }
            .bg-gradient-night {
                background: linear-gradient(135deg, #0F172A 0%, #1E293B 100%);
            }
            .bg-gradient-dawn {
                background: linear-gradient(135deg, #FBBF24 0%, #F59E0B 100%);
            }
            .bg-gradient-sunset {
                background: linear-gradient(135deg, #F59E0B 0%, #EF4444 100%);
            }
            .glass-effect {
                backdrop-filter: blur(10px);
                background-color: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
            .glass-effect-light {
                backdrop-filter: blur(10px);
                background-color: rgba(255, 255, 255, 0.7);
                border: 1px solid rgba(255, 255, 255, 0.8);
            }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center transition-colors duration-1000 ease-in-out bg-gradient-night text-white">
    <!-- 主容器 -->
    <div class="container mx-auto px-4 py-8 max-w-md">
        <!-- 时间显示卡片 -->
        <div id="time-card" class="glass-effect rounded-2xl p-8 shadow-xl animate-fade-in mb-6 w-full">
            <!-- 时间显示 -->
            <div class="flex flex-col items-center justify-center mb-4">
                <h1 id="time" class="text-6xl md:text-7xl font-mono font-bold text-shadow-lg animate-slide-up">00:00:00</h1>
                <p id="period" class="text-xl font-light mt-2 opacity-80 animate-slide-up" style="animation-delay: 0.1s;">AM</p>
            </div>
            
            <!-- 日期显示 -->
            <div class="flex flex-col items-center justify-center">
                <p id="date" class="text-xl font-medium text-shadow animate-slide-up" style="animation-delay: 0.2s;">2023年1月1日 星期日</p>
                <p id="timezone" class="text-sm opacity-70 mt-1 animate-slide-up" style="animation-delay: 0.3s;">中国标准时间 (UTC+8)</p>
            </div>
        </div>
        
        <!-- 控制面板 -->
        <div class="glass-effect rounded-2xl p-4 shadow-lg animate-fade-in w-full" style="animation-delay: 0.4s;">
            <div class="flex flex-wrap justify-center gap-3">
                <!-- 12/24小时制切换 -->
                <button id="format-toggle" class="px-4 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors flex items-center gap-2">
                    <i class="fa fa-clock-o"></i>
                    <span>24小时制</span>
                </button>
                
                <!-- 主题切换 -->
                <button id="theme-toggle" class="px-4 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors flex items-center gap-2">
                    <i class="fa fa-moon-o"></i>
                    <span>夜间模式</span>
                </button>
                
                <!-- 自定义格式按钮 -->
                <button id="custom-format-btn" class="px-4 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors flex items-center gap-2">
                    <i class="fa fa-sliders"></i>
                    <span>自定义格式</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- 自定义格式模态框 -->
    <div id="custom-format-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center hidden">
        <div class="bg-dark rounded-2xl p-6 max-w-md w-full mx-4 glass-effect-light text-white">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">自定义时间格式</h2>
                <button id="close-modal" class="text-white/70 hover:text-white">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <!-- 时间格式选择 -->
                <div>
                    <label class="block text-sm font-medium mb-2">时间格式</label>
                    <select id="time-format" class="w-full p-2 rounded-lg bg-white/10 border border-white/20 text-white">
                        <option value="HH:mm:ss">24小时制 (00:00:00)</option>
                        <option value="hh:mm:ss">12小时制 (12:00:00)</option>
                        <option value="HH:mm">24小时制 (00:00)</option>
                        <option value="hh:mm">12小时制 (12:00)</option>
                    </select>
                </div>
                
                <!-- 日期格式选择 -->
                <div>
                    <label class="block text-sm font-medium mb-2">日期格式</label>
                    <select id="date-format" class="w-full p-2 rounded-lg bg-white/10 border border-white/20 text-white">
                        <option value="YYYY年MM月DD日 EEEE">2023年1月1日 星期日</option>
                        <option value="YYYY/MM/DD EEEE">2023/1/1 星期日</option>
                        <option value="MM月DD日 EEEE">1月1日 星期日</option>
                        <option value="YYYY-MM-DD">2023-01-01</option>
                    </select>
                </div>
                
                <!-- 主题颜色选择 -->
                <div>
                    <label class="block text-sm font-medium mb-2">主题颜色</label>
                    <div class="grid grid-cols-5 gap-2">
                        <button class="theme-color-btn w-full h-8 rounded-full bg-primary" data-theme="default"></button>
                        <button class="theme-color-btn w-full h-8 rounded-full bg-secondary" data-theme="green"></button>
                        <button class="theme-color-btn w-full h-8 rounded-full bg-accent" data-theme="purple"></button>
                        <button class="theme-color-btn w-full h-8 rounded-full bg-sunset" data-theme="sunset"></button>
                        <button class="theme-color-btn w-full h-8 rounded-full bg-gradient-day" data-theme="auto"></button>
                    </div>
                </div>
                
                <button id="apply-settings" class="w-full py-2 rounded-lg bg-primary hover:bg-primary/90 transition-colors mt-4">
                    应用设置
                </button>
            </div>
        </div>
    </div>
    
    <!-- 页脚 -->
    <footer class="mt-auto py-4 text-center text-white/60 text-sm">
        <p>© 2025 时间显示 | 实时更新</p>
    </footer>

    <script>
        // 获取DOM元素
        const timeElement = document.getElementById('time');
        const periodElement = document.getElementById('period');
        const dateElement = document.getElementById('date');
        const timezoneElement = document.getElementById('timezone');
        const formatToggleBtn = document.getElementById('format-toggle');
        const themeToggleBtn = document.getElementById('theme-toggle');
        const customFormatBtn = document.getElementById('custom-format-btn');
        const customFormatModal = document.getElementById('custom-format-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const applySettingsBtn = document.getElementById('apply-settings');
        const timeFormatSelect = document.getElementById('time-format');
        const dateFormatSelect = document.getElementById('date-format');
        const themeColorBtns = document.querySelectorAll('.theme-color-btn');
        const bodyElement = document.body;
        const timeCardElement = document.getElementById('time-card');
        
        // 应用设置
        let settings = {
            is24HourFormat: true,
            theme: 'auto', // 'auto', 'light', 'dark', 'default', 'green', 'purple', 'sunset'
            timeFormat: 'HH:mm:ss',
            dateFormat: 'YYYY年MM月DD日 EEEE'
        };
        
        // 星期和月份的中文名称
        const weekdays = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];
        const months = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'];
        
        // 更新时间函数
        function updateTime() {
            const now = new Date();
            
            // 更新时间显示
            updateTimeDisplay(now);
            
            // 更新日期显示
            updateDateDisplay(now);
            
            // 更新时区显示
            updateTimezoneDisplay(now);
            
            // 根据时间自动更新主题
            if (settings.theme === 'auto') {
                updateThemeByTime(now);
            }
            
            // 每秒更新一次
            setTimeout(updateTime, 1000);
        }
        
        // 更新时间显示
        function updateTimeDisplay(date) {
            let hours = date.getHours();
            let minutes = date.getMinutes();
            let seconds = date.getSeconds();
            let period = '';
            
            // 根据格式设置处理时间
            if (!settings.is24HourFormat) {
                period = hours >= 12 ? 'PM' : 'AM';
                hours = hours % 12;
                hours = hours ? hours : 12; // 0 应显示为 12
            }
            
            // 格式化时间
            const formattedHours = hours.toString().padStart(2, '0');
            const formattedMinutes = minutes.toString().padStart(2, '0');
            const formattedSeconds = seconds.toString().padStart(2, '0');
            
            // 根据选择的时间格式显示
            let timeString = '';
            switch (settings.timeFormat) {
                case 'HH:mm:ss':
                    timeString = `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;
                    break;
                case 'hh:mm:ss':
                    timeString = `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;
                    break;
                case 'HH:mm':
                    timeString = `${formattedHours}:${formattedMinutes}`;
                    break;
                case 'hh:mm':
                    timeString = `${formattedHours}:${formattedMinutes}`;
                    break;
                default:
                    timeString = settings.is24HourFormat 
                        ? `${formattedHours}:${formattedMinutes}:${formattedSeconds}`
                        : `${formattedHours}:${formattedMinutes}:${formattedSeconds}`;
            }
            
            // 更新DOM
            timeElement.textContent = timeString;
            periodElement.textContent = period;
            periodElement.style.display = settings.is24HourFormat ? 'none' : 'block';
        }
        
        // 更新日期显示
        function updateDateDisplay(date) {
            const year = date.getFullYear();
            const month = date.getMonth();
            const day = date.getDate();
            const weekday = date.getDay();
            
            // 根据选择的日期格式显示
            let dateString = '';
            switch (settings.dateFormat) {
                case 'YYYY年MM月DD日 EEEE':
                    dateString = `${year}年${months[month]}月${day}日 ${weekdays[weekday]}`;
                    break;
                case 'YYYY/MM/DD EEEE':
                    dateString = `${year}/${months[month]}/${day} ${weekdays[weekday]}`;
                    break;
                case 'MM月DD日 EEEE':
                    dateString = `${months[month]}月${day}日 ${weekdays[weekday]}`;
                    break;
                case 'YYYY-MM-DD':
                    dateString = `${year}-${(month + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
                    break;
                default:
                    dateString = `${year}年${months[month]}月${day}日 ${weekdays[weekday]}`;
            }
            
            // 更新DOM
            dateElement.textContent = dateString;
        }
        
        // 更新时区显示
        function updateTimezoneDisplay(date) {
            // 获取时区偏移
            const timezoneOffset = date.getTimezoneOffset();
            const hoursOffset = Math.floor(Math.abs(timezoneOffset) / 60);
            const minutesOffset = Math.abs(timezoneOffset) % 60;
            const direction = timezoneOffset <= 0 ? '+' : '-';
            
            // 格式化时区字符串
            const timezoneString = `UTC${direction}${hoursOffset.toString().padStart(2, '0')}:${minutesOffset.toString().padStart(2, '0')}`;
            
            // 尝试获取本地时区名称
            let timezoneName = '本地时间';
            try {
                timezoneName = Intl.DateTimeFormat().resolvedOptions().timeZone;
            } catch (e) {
                // 如果无法获取时区名称，使用偏移量
            }
            
            // 更新DOM
            timezoneElement.textContent = `${timezoneName} (${timezoneString})`;
        }
        
        // 根据时间更新主题
        function updateThemeByTime(date) {
            const hour = date.getHours();
            
            // 移除所有主题类
            bodyElement.classList.remove('bg-gradient-day', 'bg-gradient-night', 'bg-gradient-dawn', 'bg-gradient-sunset');
            
            // 根据时间设置主题
            if (hour >= 5 && hour < 7) {
                // 黎明 (5:00 - 7:00)
                bodyElement.classList.add('bg-gradient-dawn');
                themeToggleBtn.innerHTML = '<i class="fa fa-sun-o"></i><span>黎明模式</span>';
            } else if (hour >= 7 && hour < 18) {
                // 白天 (7:00 - 18:00)
                bodyElement.classList.add('bg-gradient-day');
                themeToggleBtn.innerHTML = '<i class="fa fa-sun-o"></i><span>日间模式</span>';
            } else if (hour >= 18 && hour < 20) {
                // 日落 (18:00 - 20:00)
                bodyElement.classList.add('bg-gradient-sunset');
                themeToggleBtn.innerHTML = '<i class="fa fa-sun-o"></i><span>日落模式</span>';
            } else {
                // 夜晚 (20:00 - 5:00)
                bodyElement.classList.add('bg-gradient-night');
                themeToggleBtn.innerHTML = '<i class="fa fa-moon-o"></i><span>夜间模式</span>';
            }
        }
        
        // 切换12/24小时制
        function toggleTimeFormat() {
            settings.is24HourFormat = !settings.is24HourFormat;
            
            // 更新按钮文本
            formatToggleBtn.innerHTML = settings.is24HourFormat 
                ? '<i class="fa fa-clock-o"></i><span>24小时制</span>'
                : '<i class="fa fa-clock-o"></i><span>12小时制</span>';
            
            // 更新时间显示
            updateTimeDisplay(new Date());
            
            // 保存设置
            saveSettings();
        }
        
        // 切换主题
        function toggleTheme() {
            // 循环切换主题: auto -> light -> dark -> auto
            switch (settings.theme) {
                case 'auto':
                    settings.theme = 'light';
                    bodyElement.classList.remove('bg-gradient-day', 'bg-gradient-night', 'bg-gradient-dawn', 'bg-gradient-sunset');
                    bodyElement.classList.add('bg-gradient-day');
                    themeToggleBtn.innerHTML = '<i class="fa fa-sun-o"></i><span>日间模式</span>';
                    break;
                case 'light':
                    settings.theme = 'dark';
                    bodyElement.classList.remove('bg-gradient-day', 'bg-gradient-night', 'bg-gradient-dawn', 'bg-gradient-sunset');
                    bodyElement.classList.add('bg-gradient-night');
                    themeToggleBtn.innerHTML = '<i class="fa fa-moon-o"></i><span>夜间模式</span>';
                    break;
                case 'dark':
                    settings.theme = 'auto';
                    updateThemeByTime(new Date());
                    break;
                default:
                    settings.theme = 'auto';
                    updateThemeByTime(new Date());
            }
            
            // 保存设置
            saveSettings();
        }
        
        // 设置自定义主题颜色
        function setThemeColor(theme) {
            settings.theme = theme;
            
            // 移除所有主题类
            bodyElement.classList.remove('bg-gradient-day', 'bg-gradient-night', 'bg-gradient-dawn', 'bg-gradient-sunset');
            
            // 设置新主题
            switch (theme) {
                case 'default':
                    bodyElement.classList.add('bg-gradient-day');
                    themeToggleBtn.innerHTML = '<i class="fa fa-sun-o"></i><span>默认主题</span>';
                    break;
                case 'green':
                    bodyElement.style.background = 'linear-gradient(135deg, #10B981 0%, #34D399 100%)';
                    themeToggleBtn.innerHTML = '<i class="fa fa-leaf"></i><span>绿色主题</span>';
                    break;
                case 'purple':
                    bodyElement.style.background = 'linear-gradient(135deg, #8B5CF6 0%, #A78BFA 100%)';
                    themeToggleBtn.innerHTML = '<i class="fa fa-paint-brush"></i><span>紫色主题</span>';
                    break;
                case 'sunset':
                    bodyElement.classList.add('bg-gradient-sunset');
                    themeToggleBtn.innerHTML = '<i class="fa fa-sun-o"></i><span>日落主题</span>';
                    break;
                case 'auto':
                    updateThemeByTime(new Date());
                    break;
            }
            
            // 保存设置
            saveSettings();
        }
        
        // 打开自定义格式模态框
        function openCustomFormatModal() {
            customFormatModal.classList.remove('hidden');
            
            // 设置当前值
            timeFormatSelect.value = settings.timeFormat;
            dateFormatSelect.value = settings.dateFormat;
        }
        
        // 关闭自定义格式模态框
        function closeCustomFormatModal() {
            customFormatModal.classList.add('hidden');
        }
        
        // 应用自定义设置
        function applySettings() {
            // 获取选择的值
            settings.timeFormat = timeFormatSelect.value;
            settings.dateFormat = dateFormatSelect.value;
            
            // 如果选择了12小时制格式，自动切换到12小时制
            if (settings.timeFormat === 'hh:mm:ss' || settings.timeFormat === 'hh:mm') {
                settings.is24HourFormat = false;
                formatToggleBtn.innerHTML = '<i class="fa fa-clock-o"></i><span>12小时制</span>';
            } else {
                settings.is24HourFormat = true;
                formatToggleBtn.innerHTML = '<i class="fa fa-clock-o"></i><span>24小时制</span>';
            }
            
            // 更新时间和日期显示
            const now = new Date();
            updateTimeDisplay(now);
            updateDateDisplay(now);
            
            // 关闭模态框
            closeCustomFormatModal();
            
            // 保存设置
            saveSettings();
        }
        
        // 保存设置到本地存储
        function saveSettings() {
            localStorage.setItem('timeDisplaySettings', JSON.stringify(settings));
        }
        
        // 从本地存储加载设置
        function loadSettings() {
            const savedSettings = localStorage.getItem('timeDisplaySettings');
            
            if (savedSettings) {
                settings = JSON.parse(savedSettings);
                
                // 更新UI
                formatToggleBtn.innerHTML = settings.is24HourFormat 
                    ? '<i class="fa fa-clock-o"></i><span>24小时制</span>'
                    : '<i class="fa fa-clock-o"></i><span>12小时制</span>';
                
                // 设置主题
                if (settings.theme === 'auto') {
                    updateThemeByTime(new Date());
                } else {
                    setThemeColor(settings.theme);
                }
            }
        }
        
        // 事件监听器
        formatToggleBtn.addEventListener('click', toggleTimeFormat);
        themeToggleBtn.addEventListener('click', toggleTheme);
        customFormatBtn.addEventListener('click', openCustomFormatModal);
        closeModalBtn.addEventListener('click', closeCustomFormatModal);
        applySettingsBtn.addEventListener('click', applySettings);
        
        // 主题颜色按钮事件
        themeColorBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const theme = btn.getAttribute('data-theme');
                setThemeColor(theme);
            });
        });
        
        // 点击模态框外部关闭
        customFormatModal.addEventListener('click', (e) => {
            if (e.target === customFormatModal) {
                closeCustomFormatModal();
            }
        });
        
        // 键盘事件
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !customFormatModal.classList.contains('hidden')) {
                closeCustomFormatModal();
            }
        });
        
        // 初始化
        loadSettings();
        updateTime();
    </script>
</body>
</html>